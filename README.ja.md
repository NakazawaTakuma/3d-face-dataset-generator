## blender-face-dataset-generator

3D ãƒ•ã‚§ã‚¤ã‚¹ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã„ã€è‚Œã®è‰²ã€ã—ã‚ã€ãƒ¡ã‚¤ã‚¯ã€é«ªè‰²ãªã©å¤šæ§˜ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•ç”Ÿæˆã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”»åƒã¨å±æ€§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆCSV/XLSXï¼‰ã‚’å‡ºåŠ›ã™ã‚‹ Pythonâ€“Blender ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ã€‚

<p align="center">
  <img src="image.jpg" alt="ç”Ÿæˆã•ã‚ŒãŸé¡”ç”»åƒ" width="800" />
</p>

## ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ 

```
.
â”œâ”€â”€ generate_mask
â”‚   â”œâ”€â”€ assets/      # å…ƒã¨ãªã‚‹3Dé¡”ãƒ¢ãƒ‡ãƒ«ã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£
â”‚   â”œâ”€â”€ output/      # ç”Ÿæˆã•ã‚ŒãŸãƒã‚¹ã‚¯ç”»åƒï¼†ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›å…ˆ
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.py  # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼šãƒã‚¹ã‚¯ç”Ÿæˆï¼†å±æ€§CSV/XLSXå‡ºåŠ›
â”‚       â””â”€â”€ modules/ # ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚¶ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ç­‰ï¼‰
â”‚
â””â”€â”€ generate_face_image
    â”œâ”€â”€ assets/                   # Blenderäº’æ›ã‚¢ã‚»ãƒƒãƒˆ
    â”œâ”€â”€ output/images/           # ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ¸ˆã¿é¡”ç”»åƒ
    â”œâ”€â”€ src/
    â”‚   â””â”€â”€ main.py               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼šBlenderãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å®Ÿè¡Œ
    â””â”€â”€ generate_face_image.blend # ã‚«ãƒ¡ãƒ©ã€ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€ã‚·ã‚§ãƒ¼ãƒ€è¨­å®šå…¥ã‚ŠBlendãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ ã¯ã˜ã‚ã«

### å‰ææ¡ä»¶

- **Blender**ï¼ˆ4.2 ä»¥ä¸Šæ¨å¥¨ï¼‰
- **Python 3.8 ä»¥ä¸Š**
- å¿…è¦ãª Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆ`pip install -r requirements.txt`ï¼‰

  ```bash
  pip install -r requirements.txt
  ```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼š

   ```bash
   git clone https://github.com/your-username/blender-face-dataset-generator.git
   cd blender-face-dataset-generator
   ```

2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š

   ```bash
   pip install -r requirements.txt
   ```

3. **Blender ã‚·ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**

   `generate_face_image.blend` ãŒå¿…è¦ã§ã™ã€‚ä»¥ä¸‹ URL ã‹ã‚‰å–å¾—ã—ã€`generate_face_image/` ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚

   [Blender ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/NakazawaTakuma/3d-face-dataset-generator/releases/download/v1.0.0/generate_face_image.blend)

<p align="center">
  <img src="blender_screenshot.jpg" alt="Blenderã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ" width="800" />
</p>

## ğŸ› ï¸ ä½¿ã„æ–¹

### 1. ãƒã‚¹ã‚¯ & ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ

è‚Œã®è‰²ã€ã—ã‚ãªã©ã®å±æ€§ã‚’ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã—ã€ä»¥ä¸‹ã‚’å‡ºåŠ›ã—ã¾ã™ï¼š

- **ãƒã‚¹ã‚¯ç”»åƒ**ï¼ˆã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ãªã©ï¼‰
- **CSV/XLSX ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿**ï¼ˆå„ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§ï¼‰

```bash
cd generate_mask
python src/main.py \
  --assets-dir ./assets \
  --output-dir ./output \
  --num-samples 1000 \
  --metadata-format csv
```

**å¼•æ•°:**

- `--assets-dir` : ã‚½ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `--output-dir` : ãƒã‚¹ã‚¯ç”»åƒï¼†ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆ
- `--num-samples` : ç”Ÿæˆã‚µãƒ³ãƒ—ãƒ«æ•°
- `--metadata-format` : `csv` ã¾ãŸã¯ `xlsx`

### 2. é¡”ç”»åƒã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

ç”Ÿæˆã•ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€Blender API ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é©ç”¨ã—ã¦é«˜å“è³ªãªé¡”ç”»åƒã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

```bash
cd generate_face_image
blender --background generate_face_image.blend \
    --python src/main.py \
    -- --input-metadata ../generate_mask/output/metadata.csv \
       --output-dir ./output/images \
       --resolution 512 512
```

**å¼•æ•°:**

- `--input-metadata` : ãƒã‚¹ã‚¯ç”Ÿæˆã‚¹ãƒ†ãƒƒãƒ—ã§å‡ºåŠ›ã•ã‚ŒãŸ CSV/XLSX
- `--output-dir` : ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”»åƒã®ä¿å­˜å…ˆ
- `--resolution` : å‡ºåŠ›ç”»åƒã®å¹…ã¨é«˜ã•ï¼ˆä¾‹ï¼š512 512ï¼‰

> **æ³¨æ„:** `generate_face_image.blend` ãŒ `generate_face_image/` ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚

## âš™ï¸ è¨­å®š & ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

- **`generate_mask/src/modules/`**

  - å±æ€§ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã€ãƒã‚¹ã‚¯ç”Ÿæˆã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’å«ã‚€

- **`generate_face_image/src/main.py`**

  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€Blender API çµŒç”±ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é©ç”¨ã—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œ

ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°åˆ†å¸ƒã‚„ã‚·ã‚§ãƒ¼ãƒ€è¨­å®šã€ã‚«ãƒ¡ãƒ©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ Blend ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§èª¿æ•´å¯èƒ½ã§ã™ã€‚

## ğŸ“ å‡ºåŠ›å†…å®¹

- **ãƒã‚¹ã‚¯ç”»åƒ** & **metadata.csv/xlsx** â†’ `generate_mask/output/`
- **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ¸ˆã¿é¡”ç”»åƒ** â†’ `generate_face_image/output/images/`

## ğŸ™ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ

ãƒã‚°ä¿®æ­£ã€æ–°æ©Ÿèƒ½è¿½åŠ ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ãªã©ã€Issue ã‚„ Pull Request ã‚’æ­“è¿ã—ã¾ã™ï¼
